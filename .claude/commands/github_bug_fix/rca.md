---
description: 分析并记录 GitHub issue 的根本原因
argument-hint: [github-issue-id]
---

# 根因分析: GitHub Issue #$ARGUMENTS

## 目标

调查本仓库的 GitHub issue #$ARGUMENTS，识别根本原因，记录发现以供后续实现。

**前提条件**：
- 本地 Git 仓库有 GitHub origin
- GitHub CLI 已安装并认证
- 有效的 GitHub issue ID

## 调查流程

### 1. 获取 Issue 详情

```bash
gh issue view $ARGUMENTS
```

获取：标题、描述、报告者、标签、状态、评论

### 2. 搜索代码库

- 搜索 issue 中提到的组件
- 查找相关函数、类、模块
- 检查类似实现
- 查找错误消息、函数名

### 3. 查看近期历史

```bash
git log --oneline -20 -- [相关路径]
```

查找：近期修改、相关修复、可能引入问题的重构

### 4. 调查根因

分析代码确定：
- 实际 bug 是什么？
- 为什么发生？
- 是逻辑错误、边界情况还是缺少验证？

考虑：输入验证失败、未处理的边界情况、竞态条件、错误假设、缺少错误处理

### 5. 评估影响

- 影响范围多大？
- 哪些功能受影响？
- 有无变通方案？
- 严重程度？
- 是否涉及数据损坏或安全问题？

### 6. 提出修复方案

- 需要改什么？
- 修改哪些文件？
- 修复策略？
- 需要什么测试？

## 输出：创建 RCA 文档

保存到：`docs/rca/issue-$ARGUMENTS.md`

### RCA 文档结构

```markdown
# 根因分析: GitHub Issue #$ARGUMENTS

## Issue 摘要
- **ID**: #$ARGUMENTS
- **标题**: [标题]
- **严重程度**: [严重/高/中/低]

## 问题描述
**预期行为**：[应该发生什么]
**实际行为**：[实际发生什么]

## 复现步骤
1. [步骤1]
2. [步骤2]

## 根因

### 受影响组件
- **文件**: [文件路径列表]
- **函数/类**: [具体代码位置]

### 分析
[根因详细解释]

**代码位置**：
[文件路径:行号]

## 影响评估
- **范围**: [影响范围]
- **受影响功能**: [功能列表]

## 修复方案

### 修复策略
[高层修复方法]

### 要修改的文件
1. **[文件路径]** - 改动：[内容] - 原因：[原因]

### 测试要求
1. [测试用例1]
2. [测试用例2]

**验证命令**：
[具体命令]

## 下一步
1. 审查此 RCA 文档
2. 运行 `/implement-fix $ARGUMENTS` 实现修复
3. 完成后运行 `/commit`
```
