# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢ä½ å¯¹ Habit Tracker é¡¹ç›®çš„å…³æ³¨ï¼è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°ä¼˜å…ˆçš„ä¹ æƒ¯è¿½è¸ªåº”ç”¨ï¼Œæˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## ç›®å½•

- [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤å˜æ›´](#æäº¤å˜æ›´)
- [Pull Request æµç¨‹](#pull-request-æµç¨‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)

---

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ï¼š

- **Python 3.11+** - [ä¸‹è½½åœ°å€](https://www.python.org/downloads/)
- **uv** - Python åŒ…ç®¡ç†å™¨ ([å®‰è£…æŒ‡å—](https://github.com/astral-sh/uv))
- **Node.js 18+** - [ä¸‹è½½åœ°å€](https://nodejs.org/)
- **Git** - [ä¸‹è½½åœ°å€](https://git-scm.com/)

### å…‹éš†ä»“åº“

```bash
git clone https://github.com/your-username/habit-tracker.git
cd habit-tracker
```

### åç«¯è®¾ç½®

1. è¿›å…¥åç«¯ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š

```bash
cd backend
uv sync
```

2. å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼š

```bash
uv run uvicorn app.main:app --reload --port 8000
```

åç«¯å°†è¿è¡Œåœ¨ http://localhost:8000
API æ–‡æ¡£å¯è®¿é—® http://localhost:8000/docs

### å‰ç«¯è®¾ç½®

1. æ‰“å¼€æ–°ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š

```bash
cd frontend
npm install
```

2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼š

```bash
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ http://localhost:5173

### éªŒè¯å®‰è£…

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ° Habit Tracker åº”ç”¨ç•Œé¢ã€‚

---

## ä»£ç è§„èŒƒ

### Python åç«¯è§„èŒƒ

#### ä»£ç é£æ ¼

- ä½¿ç”¨ **Ruff** è¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
- ç›®æ ‡ Python ç‰ˆæœ¬ï¼š3.11
- æœ€å¤§è¡Œé•¿åº¦ï¼š100 å­—ç¬¦
- éµå¾ª PEP 8 è§„èŒƒ

è¿è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
cd backend
uv run ruff check .
```

è‡ªåŠ¨ä¿®å¤é—®é¢˜ï¼š

```bash
uv run ruff check --fix .
```

è¿è¡Œä»£ç æ ¼å¼åŒ–ï¼š

```bash
cd backend
uv run ruff format .
```

æ£€æŸ¥æ ¼å¼ï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰ï¼š

```bash
uv run ruff format --check .
```

#### ä»£ç ç»„ç»‡

- **æ¨¡å‹å±‚** (`models.py`): SQLAlchemy ORM æ¨¡å‹å®šä¹‰
- **æ¨¡å¼å±‚** (`schemas.py`): Pydantic è¯·æ±‚/å“åº”æ¨¡å¼
- **è·¯ç”±å±‚** (`routers/`): API ç«¯ç‚¹å®ç°
- **æ•°æ®åº“å±‚** (`database.py`): æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†

#### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ Pydantic æ¨¡å¼**ï¼šæ‰€æœ‰ API è¯·æ±‚å’Œå“åº”å¿…é¡»ä½¿ç”¨ Pydantic æ¨¡å¼è¿›è¡ŒéªŒè¯
2. **ä¾èµ–æ³¨å…¥**ï¼šä½¿ç”¨ FastAPI çš„ `Depends()` æ³¨å…¥æ•°æ®åº“ä¼šè¯
3. **æ—¥æœŸæ ¼å¼**ï¼šç»Ÿä¸€ä½¿ç”¨ ISO-8601 æ ¼å¼ (`YYYY-MM-DD`)
4. **æ—¥å¿—è®°å½•**ï¼šä½¿ç”¨ structlog è®°å½•ç»“æ„åŒ–æ—¥å¿—

ç¤ºä¾‹ï¼š
```python
import structlog
logger = structlog.get_logger()
logger.info("Habit created", habit_id=habit.id, name=habit.name)
```

### React å‰ç«¯è§„èŒƒ

#### ä»£ç é£æ ¼

- ä½¿ç”¨ ES6+ è¯­æ³•
- ä¼˜å…ˆä½¿ç”¨å‡½æ•°ç»„ä»¶å’Œ Hooks
- ä½¿ç”¨ Tailwind CSS è¿›è¡Œæ ·å¼è®¾è®¡

#### ä»£ç ç»„ç»‡

- **åŠŸèƒ½æ¨¡å—** (`src/features/`): æŒ‰åŠŸèƒ½ç»„ç»‡çš„ç»„ä»¶ã€hooks å’Œ API
- **å…±äº«ç»„ä»¶** (`src/components/ui/`): å¯å¤ç”¨çš„ UI ç»„ä»¶
- **é¡µé¢** (`src/pages/`): è·¯ç”±çº§åˆ«çš„é¡µé¢ç»„ä»¶
- **å·¥å…·å‡½æ•°** (`src/lib/`): é€šç”¨å·¥å…·å‡½æ•°

#### æœ€ä½³å®è·µ

1. **æ•°æ®è·å–**ï¼šä½¿ç”¨ TanStack Query ç®¡ç†æœåŠ¡å™¨çŠ¶æ€
2. **è¡¨å•å¤„ç†**ï¼šä½¿ç”¨ react-hook-form + Zod è¿›è¡Œè¡¨å•éªŒè¯
3. **æ—¥æœŸå¤„ç†**ï¼šç»Ÿä¸€ä½¿ç”¨ date-fns åº“
4. **ç»„ä»¶å‘½å**ï¼šä½¿ç”¨ PascalCase å‘½åç»„ä»¶æ–‡ä»¶

### æµ‹è¯•è§„èŒƒ

#### æµ‹è¯•ç­–ç•¥

- **70% å•å…ƒæµ‹è¯•**ï¼šä¸šåŠ¡é€»è¾‘ã€éªŒè¯å™¨
- **20% é›†æˆæµ‹è¯•**ï¼šAPI ç«¯ç‚¹
- **10% E2E æµ‹è¯•**ï¼šå…³é”®ç”¨æˆ·æµç¨‹

#### è¿è¡Œæµ‹è¯•

åç«¯æµ‹è¯•ï¼š
```bash
cd backend
uv run pytest tests/ -v
```

æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡ï¼š
```bash
uv run pytest tests/ --cov=app --cov-report=html
```

å‰ç«¯æµ‹è¯•ï¼š
```bash
cd frontend
npm run test
```

E2E æµ‹è¯•ï¼š
```bash
npx playwright test
```

#### æµ‹è¯•è¦æ±‚

- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«ç›¸åº”çš„æµ‹è¯•
- æµ‹è¯•è¦†ç›–ç‡ä¸å¾—ä½äº 80%
- æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡æ‰èƒ½åˆå¹¶

---

## æäº¤å˜æ›´

### Commit Message è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨è¯­ä¹‰åŒ–çš„ commit message æ ¼å¼ï¼š

```
<type>: <description>

[optional body]

[optional footer]
```

#### Type ç±»å‹

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

#### ç¤ºä¾‹

```bash
feat: add habit archive functionality

- Add archive endpoint to habits router
- Update frontend to show archive button
- Add tests for archive feature

Closes #123
```

### ä½¿ç”¨ Claude Code æäº¤

å¦‚æœä½ ä½¿ç”¨ Claude Codeï¼Œå¯ä»¥ä½¿ç”¨ `/commit` å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆè§„èŒƒçš„ commit messageï¼š

```bash
claude
> /commit
```

Claude ä¼šåˆ†æä½ çš„å˜æ›´å¹¶ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit messageã€‚

---

## Pull Request æµç¨‹

### 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯

ä» `main` åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯ï¼š

```bash
git checkout main
git pull origin main
git checkout -b feature/your-feature-name
```

åˆ†æ”¯å‘½åè§„èŒƒï¼š
- `feature/` - æ–°åŠŸèƒ½
- `fix/` - Bug ä¿®å¤
- `docs/` - æ–‡æ¡£æ›´æ–°
- `refactor/` - ä»£ç é‡æ„

### 2. å¼€å‘å’Œæµ‹è¯•

- éµå¾ªä»£ç è§„èŒƒè¿›è¡Œå¼€å‘
- ç¼–å†™ç›¸åº”çš„æµ‹è¯•
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- è¿è¡Œä»£ç æ£€æŸ¥å·¥å…·

### 3. æäº¤å˜æ›´

```bash
git add .
git commit -m "feat: your feature description"
```

### 4. æ¨é€åˆ°è¿œç¨‹

```bash
git push origin feature/your-feature-name
```

### 5. åˆ›å»º Pull Request

1. è®¿é—® GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» "New Pull Request"
3. é€‰æ‹©ä½ çš„åˆ†æ”¯
4. å¡«å†™ PR æè¿°

#### PR æè¿°æ¨¡æ¿

```markdown
## å˜æ›´è¯´æ˜

ç®€è¦æè¿°è¿™ä¸ª PR çš„ç›®çš„å’Œå®ç°æ–¹å¼ã€‚

## å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½
- [ ] Bug ä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] å…¶ä»–

## æµ‹è¯•

- [ ] å·²æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å·²æ·»åŠ é›†æˆæµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡

## æ£€æŸ¥æ¸…å•

- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²è¿è¡Œä»£ç æ£€æŸ¥å·¥å…·
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] Commit message ç¬¦åˆè§„èŒƒ
```

### 6. Code Review

- ç­‰å¾…ç»´æŠ¤è€…å®¡æŸ¥ä½ çš„ä»£ç 
- æ ¹æ®åé¦ˆè¿›è¡Œä¿®æ”¹
- ä¿æŒ PR æ›´æ–°

### 7. åˆå¹¶

PR å®¡æŸ¥é€šè¿‡åï¼Œç»´æŠ¤è€…ä¼šå°†å…¶åˆå¹¶åˆ° `main` åˆ†æ”¯ã€‚

---

## é¡¹ç›®ç»“æ„

```
habit-tracker/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py           # FastAPI å…¥å£
â”‚   â”‚   â”œâ”€â”€ database.py       # SQLite è¿æ¥
â”‚   â”‚   â”œâ”€â”€ models.py         # SQLAlchemy æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas.py        # Pydantic æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ logging_config.py # æ—¥å¿—é…ç½®
â”‚   â”‚   â””â”€â”€ routers/          # API è·¯ç”±
â”‚   â”œâ”€â”€ tests/                # åç«¯æµ‹è¯•
â”‚   â””â”€â”€ pyproject.toml        # Python é¡¹ç›®é…ç½®
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ features/         # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api/              # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ App.jsx
â”‚   â”œâ”€â”€ tests/                # å‰ç«¯æµ‹è¯•
â”‚   â””â”€â”€ package.json          # Node.js é¡¹ç›®é…ç½®
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                  # E2E æµ‹è¯•
â””â”€â”€ .claude/
    â”œâ”€â”€ PRD.md                # äº§å“éœ€æ±‚æ–‡æ¡£
    â”œâ”€â”€ reference/            # æœ€ä½³å®è·µæ–‡æ¡£
    â””â”€â”€ commands/             # è‡ªå®šä¹‰å‘½ä»¤
```

---

## è·å–å¸®åŠ©

å¦‚æœä½ åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ [README.md](./README.md) äº†è§£é¡¹ç›®åŸºç¡€ä¿¡æ¯
2. æŸ¥çœ‹ [PRD.md](./.claude/PRD.md) äº†è§£äº§å“éœ€æ±‚
3. æŸ¥çœ‹ `.claude/reference/` ç›®å½•ä¸‹çš„æœ€ä½³å®è·µæ–‡æ¡£
4. åœ¨ GitHub Issues ä¸­æé—®

---

## è¡Œä¸ºå‡†åˆ™

- å°Šé‡æ‰€æœ‰è´¡çŒ®è€…
- ä¿æŒå‹å¥½å’Œä¸“ä¸šçš„æ²Ÿé€š
- æ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„
- å…³æ³¨å¯¹é¡¹ç›®æœ€æœ‰åˆ©çš„äº‹æƒ…

æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼ğŸ‰
